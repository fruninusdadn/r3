---
order: 3
title: API Reference
---

# API Reference

## Client Initialization

```typescript
import { Recall } from '@n3wth/recall';

const memory = new Recall({
  redis: 'redis://localhost:6379',
  apiKey: process.env.MEM0_API_KEY,
  userId: 'user-123',
  cacheStrategy: 'aggressive'
});
```

## Core Methods

### add(params)

Add a new memory to the system.

```typescript
await memory.add({
  content: string | { role: string, content: string }[],
  metadata?: object,
  priority?: 'low' | 'normal' | 'high' | 'critical',
  async?: boolean,
  user_id?: string
})
```

**Returns**: `{ id: string, status: 'queued' | 'completed' }`

### search(params)

Search for relevant memories.

```typescript
await memory.search({
  query: string,
  limit?: number,
  user_id?: string,
  prefer_cache?: boolean,
  metadata_filter?: object
})
```

**Returns**: `{ memories: Memory[], source: 'cache' | 'cloud' }`

### get(id)

Retrieve a specific memory by ID.

```typescript
await memory.get(id: string)
```

**Returns**: `Memory | null`

### update(id, params)

Update an existing memory.

```typescript
await memory.update(id: string, {
  content: string,
  metadata?: object
})
```

**Returns**: `{ success: boolean }`

### delete(id)

Delete a memory and clear from all cache layers.

```typescript
await memory.delete(id: string)
```

**Returns**: `{ success: boolean }`

## Cache Management

### cache.stats()

Get cache performance metrics.

```typescript
await memory.cache.stats()
```

**Returns**:
```typescript
{
  hits: number,
  misses: number,
  hit_rate: number,
  l1_size: number,
  l2_size: number,
  memory_usage: string,
  top_accessed: string[]
}
```

### cache.optimize()

Optimize cache by promoting frequently accessed memories.

```typescript
await memory.cache.optimize({
  force_refresh?: boolean,
  max_memories?: number
})
```

### cache.clear()

Clear all cached data.

```typescript
await memory.cache.clear()
```

## Configuration Options

### Cache Strategies

- **aggressive**: Maximum caching, ideal for read-heavy workloads
- **balanced**: Standard caching with moderate TTLs
- **conservative**: Minimal caching, prioritizes data freshness

### TTL Configuration

```typescript
{
  cache: {
    ttl: {
      l1: 86400,    // 24 hours
      l2: 604800,   // 7 days
      search: 300   // 5 minutes
    }
  }
}
```

### Connection Options

```typescript
{
  redis: {
    url: string,
    maxRetries: number,
    connectionTimeout: number,
    enableOfflineQueue: boolean
  },
  mem0: {
    apiKey: string,
    baseUrl: string,
    timeout: number
  }
}
```

## Error Handling

```typescript
try {
  await memory.add({ content: 'test' })
} catch (error) {
  if (error.code === 'REDIS_CONNECTION_FAILED') {
    // Handle Redis failure
  } else if (error.code === 'MEM0_API_ERROR') {
    // Handle API error
  }
}
```

## Event Subscriptions

```typescript
memory.on('cache:hit', (key) => {
  console.log(`Cache hit for ${key}`)
})

memory.on('cache:miss', (key) => {
  console.log(`Cache miss for ${key}`)
})

memory.on('sync:complete', (stats) => {
  console.log(`Synced ${stats.count} memories`)
})
```